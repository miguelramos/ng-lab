{"version":3,"sources":["webpack:///src/app/pages/home/home-resolver.ts","webpack:///src/app/pages/home/home-routing.module.ts","webpack:///src/app/pages/home/home-service.ts","webpack:///src/app/pages/home/home.component.ts","webpack:///src/app/pages/home/home.component.html","webpack:///src/app/pages/home/home.module.ts","webpack:///src/app/pages/home/state/home.state.ts"],"names":["HomeResolver","homeState","getContent","routes","component","path","resolve","content","HomeRoutingModule","forChild","HomeService","urlService","httpService","urlHome","get","urlPackages","pipe","response","data","homeModel","packages","HomeComponent","home$","title$","description$","packages$","HomeModule","forFeature","HomeState","homeService","fetchAll","setState","state","title","description","home","name","defaults"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAIO;AAAA;AAAA;AAAA,UAAMA,YAAN;AAAA;AAAA;AACL,8BACUC,SADV,EAC8B;AAAA;;AAApB,eAAAA,SAAA,GAAAA,SAAA;AACL;;AAHA;AAAA;AAAA,oCAKY;AACf,mBAAO,KAAKA,SAAL,CAAeC,UAAf,EAAP;AACD;AAPI;;AAAA;AAAA;;;yBAAMF,Y,EAAY,mH;AAAA,O;;;eAAZA,Y;AAAY,iBAAZA,YAAY;;;KAAlB;;;;;;;;;;;;;;;;;ACLP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAKA,QAAMG,MAAM,GAAW,CACrB;AACEC,eAAS,EAAE,6DADb;AAEEC,UAAI,EAAE,EAFR;AAGEC,aAAO,EAAE;AACPC,eAAO,EAAE;AADF;AAHX,KADqB,CAAvB;;AAeO;AAAA;AAAA;AAAA,UAAMC,iBAAN;AAAA;AAAA;;;cAAMA;;;;2BAAAA,iB;AAAiB,S;AAAA,mBAHjB,CAAC,2DAAD,C;AAAc,kBADhB,CAAC,6DAAaC,QAAb,CAAsBN,MAAtB,CAAD,CACgB,EACf,4DADe;;;KAGpB;;;0HAAMK,iB,EAAiB;AAAA;AAAA,kBAFlB,4DAEkB;AAAA,O;AAFN,K;;;;;;;;;;;;;;;;;AClBxB;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAOO;AAAA;AAAA;AAAA,UAAME,WAAN;AAAA;AAAA;AACL,6BACmBC,UADnB,EAEmBC,WAFnB,EAE0C;AAAA;;AADvB,eAAAD,UAAA,GAAAA,UAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACd;;AAJA;AAAA;AAAA,qCAMa;AAAA;;AAChB,gBAAMC,OAAO,GAAG,KAAKF,UAAL,CAAgBG,GAAhB,CAAoB,YAApB,CAAhB;AACA,gBAAMC,WAAW,GAAG,KAAKJ,UAAL,CAAgBG,GAAhB,CAAoB,gBAApB,CAApB;AAEA,mBAAO,KAAKF,WAAL,CAAiBE,GAAjB,CAAwCD,OAAxC,EAAiDG,IAAjD,CACL,2DAAI,UAAAC,QAAQ;AAAA,qBAAIA,QAAQ,CAACC,IAAb;AAAA,aAAZ,CADK,EAEL,iEAAU,UAAAC,SAAS;AAAA,qBAAI,KAAI,CAACP,WAAL,CAAiBE,GAAjB,CAAkCC,WAAlC,EAA+CC,IAA/C,CACrB,2DAAI,UAAAC,QAAQ;AAAA,uBAAK,MAAD,OAAC,CAAD;AAAEG,0BAAQ,EAAEH,QAAQ,CAACC;AAArB,iBAAC,EAA6BC,SAA7B,CAAL;AAAA,eAAZ,CADqB,CAAJ;AAAA,aAAnB,CAFK,CAAP;AAMD;AAhBI;;AAAA;AAAA;;;yBAAMT,W,EAAW,uH,EAAA,uH;AAAA,O;;;eAAXA,W;AAAW,iBAAXA,WAAW;;;KAAjB;;;;;;;;;;;;;;;;;ACPP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;;;;;;;ACMI;;AACE;;AAA6B;;AAAiB;;AAC9C;;AACE;;AACF;;AACA;;AAAkC;;AAAuB;;AACzD;;AACE;;AAAuF;;AAAS;;AAChG;;AAIF;;AACF;;;;;;AAZ+B;;AAAA;;AAEtB;;AAAA,sJAAoB,KAApB,EAAoB,eAApB;;AAE2B;;AAAA;;AAEc;;AAAA;;AAE5C;;AAAA,8FAAyB,KAAzB,EAAyB,4CAAzB,EAAyB,2DAAzB;;;;ADJH;AAAA;AAAA;AAAA,UAAMW,aAAN;AAAA;AAAA;AAOL,+BACmBpB,SADnB,EACuC;AAAA;;AAApB,eAAAA,SAAA,GAAAA,SAAA;AAEjB,eAAKqB,KAAL,GAAa,KAAKrB,SAAL,CAAeqB,KAA5B;AACD;;AAXI;AAAA;AAAA,qCAaM;AACT,iBAAKC,MAAL,GAAc,KAAKD,KAAL,CAAWN,IAAX,CACZ,6DAAM,OAAN,CADY,CAAd;AAIA,iBAAKQ,YAAL,GAAoB,KAAKF,KAAL,CAAWN,IAAX,CAClB,6DAAM,aAAN,CADkB,CAApB;AAIA,iBAAKS,SAAL,GAAiB,KAAKH,KAAL,CAAWN,IAAX,CACf,6DAAM,UAAN,CADe,CAAjB;AAGD;AAzBI;;AAAA;AAAA;;;yBAAMK,a,EAAa,4H;AAAA,O;;;cAAbA,a;AAAa,oC;AAAA,iB;AAAA,e;AAAA,0W;AAAA;AAAA;ACVxB;;AACE;;AAA2B;;;;AAAgB;;AAC3C;;AAAyB;;;;AAAsB;;AACjD;;AACA;;AACE;;;;AAcF;;;;AAlB6B;;AAAA;;AACF;;AAAA;;AAGJ;;AAAA;;;;;;;;KDKlB;;;;;;;;;;;;;;;;;AEXP;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;AAAA;;;AAAA;AAAA;AAAA;;AAkBO;AAAA;AAAA;AAAA,UAAMK,UAAN;AAAA;AAAA;;;cAAMA;;;;2BAAAA,U;AAAU,S;AAAA,mBAPV,CAAC,yDAAD,C;AAAa,kBACf,CACP,4DADO,EAEP,sEAFO,EAGP,uDAAWC,UAAX,CAAsB,CAAC,2DAAD,CAAtB,CAHO,CADe;;;KAOnB;;;0HAAMD,U,EAAU;AAAA,uBARN,6DAQM;AARO,kBAG1B,4DAH0B,EAI1B,sEAJ0B,EAIT,+CAJS;AAQP,O;AAJF,K;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCIRE,SAAS;AAAA;AAAA;AAAA;;AAIpB,2BACmBC,WADnB,EAC2C;AAAA;;AAAA;;AAEzC;AAFiB,iBAAAA,WAAA,GAAAA,WAAA;AAAwB;AAG1C;;AARmB;AAAA;AAAA,uCAWA;AAAA;;AAClB,mBAAO,KAAKA,WAAL,CAAiBC,QAAjB,GAA4Bd,IAA5B,CACL,2DAAI,UAAAT,OAAO;AAAA,qBAAI,MAAI,CAACwB,QAAL,CAAc,UAACC,KAAD,EAAW;AACtC,uBAAO,MAAP,OAAO,CAAP,kBACKA,KADL,CAAO,EACG;AACRC,uBAAK,EAAE1B,OAAO,CAAC0B,KADP;AAERC,6BAAW,EAAE3B,OAAO,CAAC2B,WAFb;AAGRd,0BAAQ,EAAEb,OAAO,CAACa;AAHV,iBADH,CAAP;AAMD,eAPc,CAAJ;AAAA,aAAX,CADK,CAAP;AAUD;AAtBmB;;AAAA;AAAA,QAAS,kEAAT,C;;;yBAATQ,S,EAAS,iH;AAAA,O;;;eAATA,S;AAAS,iBAATA,SAAS;;AAEpB,gEADC,2DAAO,UAAAI,KAAK;AAAA,eAAIA,KAAK,CAACG,IAAV;AAAA,OAAZ,CACD,E,wEAAc,+C,CAAd,G,mBAAA,E,OAAA,E,MAAA;AASA,gEADC,gEACD,E,iFAAA,E,iFAAA,E,qFAAA,G,mBAAA,E,YAAA,E,IAAA;AAXWP,eAAS,6DAVrB,yEAUqB,EATrB,0DAAiB;AAChBQ,YAAI,EAAE,MADU;AAEhBC,gBAAQ,EAAE;AACRJ,eAAK,EAAE,IADC;AAERC,qBAAW,EAAE,IAFL;AAGRd,kBAAQ,EAAE;AAHF;AAFM,OAAjB,CASqB,GAATQ,SAAS,CAAT","file":"pages-home-home-module-es5.js","sourcesContent":["import { Resolve } from '@angular/router';\nimport { Injectable } from '@angular/core';\nimport { HomeState } from './state/home.state';\n\n@Injectable()\nexport class HomeResolver implements Resolve<any> {\n  constructor(\n    private homeState: HomeState\n  ) { }\n\n  public resolve() {\n    return this.homeState.getContent();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HomeComponent } from './home.component';\nimport { HomeResolver } from './home-resolver';\n\nconst routes: Routes = [\n  {\n    component: HomeComponent,\n    path: '',\n    resolve: {\n      content: HomeResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  providers: [HomeResolver],\n  exports: [RouterModule]\n})\nexport class HomeRoutingModule {}\n","import { Injectable } from '@angular/core';\nimport { HttpUrlService } from '@ng-lab/http/url';\nimport { HttpClient } from '@angular/common/http';\nimport { map, concatMap } from 'rxjs/operators';\nimport { HomeModel } from './state/home-model';\n\n@Injectable()\nexport class HomeService {\n  constructor(\n    private readonly urlService: HttpUrlService,\n    private readonly httpService: HttpClient\n  ) { }\n\n  public fetchAll() {\n    const urlHome = this.urlService.get('HOME.FETCH');\n    const urlPackages = this.urlService.get('PACKAGES.FETCH');\n\n    return this.httpService.get<{data: HomeModel}>(urlHome).pipe(\n      map(response => response.data),\n      concatMap(homeModel => this.httpService.get<{data: any}>(urlPackages).pipe(\n        map(response => ({packages: response.data, ...homeModel}))\n      ))\n    );\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { HomeState } from './state/home.state';\nimport { Observable } from 'rxjs';\nimport { HomeModel } from './state/home-model';\nimport { map, pluck } from 'rxjs/operators';\n\n@Component({\n  selector: 'ng-lab-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n  private readonly home$: Observable<HomeModel>;\n\n  title$: Observable<string>;\n  description$: Observable<string>;\n  packages$: Observable<[HomeModel['packages']]>;\n\n  constructor(\n    private readonly homeState: HomeState\n  ) {\n    this.home$ = this.homeState.home$;\n  }\n\n  ngOnInit() {\n    this.title$ = this.home$.pipe(\n      pluck('title')\n    );\n\n    this.description$ = this.home$.pipe(\n      pluck('description')\n    );\n\n    this.packages$ = this.home$.pipe(\n      pluck('packages')\n    );\n  }\n\n}\n","\n  <div class=\"ui-hero\">\n    <h1 class=\"ui-hero__title\">{{title$|async}}</h1>\n    <p class=\"ui-hero__info\">{{description$|async}}</p>\n  </div>\n  <section class=\"ui-section\">\n    <div class=\"ui-card\" *ngFor=\"let package of packages$ | async\">\n      <div class=\"ui-card__header\">{{package.title}}</div>\n      <div class=\"ui-card__media\">\n        <img [src]=\"package.logo\" [alt]=\"package.name\" />\n      </div>\n      <div class=\"ui-card__description\">{{package.description}}</div>\n      <div class=\"ui-card__footer\">\n        <a class=\"btn btn-sm btn-link\" style=\"flex:1\" [routerLink]=\"['/packages', package.id]\">Read more</a>\n        <img\n          [alt]=\"package.namespace\"\n          [src]=\"package.badge + '?color=green&style=flat'\"\n        />\n      </div>\n    </div>\n  </section>\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { HomeComponent } from './home.component';\nimport { HomeRoutingModule } from './home-routing.module';\nimport { HomeService } from './home-service';\nimport { NgxsModule } from '@ngxs/store';\nimport { HomeState } from './state/home.state';\n\n@NgModule({\n  declarations: [HomeComponent],\n  providers: [HomeService],\n  imports: [\n    CommonModule,\n    HomeRoutingModule,\n    NgxsModule.forFeature([HomeState])\n  ]\n})\nexport class HomeModule {}\n","import { action, NgxsDataRepository, StateRepository } from '@ngxs-labs/data';\nimport { Injectable } from '@angular/core';\nimport { HomeModel } from './home-model';\nimport { State, Select } from '@ngxs/store';\nimport { HomeService } from '../home-service';\nimport { tap } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@StateRepository()\n@State<HomeModel>({\n  name: 'home',\n  defaults: {\n    title: null,\n    description: null,\n    packages: null\n  }\n})\n@Injectable()\nexport class HomeState extends NgxsDataRepository<HomeModel> {\n  @Select(state => state.home)\n  public home$: Observable<HomeModel>;\n\n  constructor(\n    private readonly homeService: HomeService\n  ) {\n    super();\n  }\n\n  @action()\n  public getContent() {\n    return this.homeService.fetchAll().pipe(\n      tap(content => this.setState((state) => {\n        return {\n          ...state,\n          title: content.title,\n          description: content.description,\n          packages: content.packages\n        };\n      }))\n    );\n  }\n}\n"]}