{"version":3,"sources":["./src/app/pages/home/home-resolver.ts","./src/app/pages/home/home-routing.module.ts","./src/app/pages/home/home-service.ts","./src/app/pages/home/home.component.ts","./src/app/pages/home/home.component.html","./src/app/pages/home/home.module.ts","./src/app/pages/home/state/home.state.ts"],"names":[],"mappings":"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","file":"pages-home-home-module-es2015.js","sourcesContent":["import { Resolve } from '@angular/router';\nimport { Injectable } from '@angular/core';\nimport { HomeState } from './state/home.state';\n\n@Injectable()\nexport class HomeResolver implements Resolve<any> {\n  constructor(\n    private homeState: HomeState\n  ) { }\n\n  public resolve() {\n    return this.homeState.getContent();\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { HomeComponent } from './home.component';\nimport { HomeResolver } from './home-resolver';\n\nconst routes: Routes = [\n  {\n    component: HomeComponent,\n    path: '',\n    resolve: {\n      content: HomeResolver\n    }\n  }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  providers: [HomeResolver],\n  exports: [RouterModule]\n})\nexport class HomeRoutingModule {}\n","import { Injectable } from '@angular/core';\nimport { HttpUrlService } from '@ng-lab/http/url';\nimport { HttpClient } from '@angular/common/http';\nimport { map, concatMap } from 'rxjs/operators';\nimport { HomeModel } from './state/home-model';\n\n@Injectable()\nexport class HomeService {\n  constructor(\n    private readonly urlService: HttpUrlService,\n    private readonly httpService: HttpClient\n  ) { }\n\n  public fetchAll() {\n    const urlHome = this.urlService.get('HOME.FETCH');\n    const urlPackages = this.urlService.get('PACKAGES.FETCH');\n\n    return this.httpService.get<{data: HomeModel}>(urlHome).pipe(\n      map(response => response.data),\n      concatMap(homeModel => this.httpService.get<{data: any}>(urlPackages).pipe(\n        map(response => ({packages: response.data, ...homeModel}))\n      ))\n    );\n  }\n}\n","import { Component, OnInit } from '@angular/core';\nimport { HomeState } from './state/home.state';\nimport { Observable } from 'rxjs';\nimport { HomeModel } from './state/home-model';\nimport { map, pluck } from 'rxjs/operators';\n\n@Component({\n  selector: 'ng-lab-home',\n  templateUrl: './home.component.html',\n  styleUrls: ['./home.component.scss']\n})\nexport class HomeComponent implements OnInit {\n  private readonly home$: Observable<HomeModel>;\n\n  title$: Observable<string>;\n  description$: Observable<string>;\n  packages$: Observable<[HomeModel['packages']]>;\n\n  constructor(\n    private readonly homeState: HomeState\n  ) {\n    this.home$ = this.homeState.home$;\n  }\n\n  ngOnInit() {\n    this.title$ = this.home$.pipe(\n      pluck('title')\n    );\n\n    this.description$ = this.home$.pipe(\n      pluck('description')\n    );\n\n    this.packages$ = this.home$.pipe(\n      pluck('packages')\n    );\n  }\n\n}\n","\n  <div class=\"ui-hero\">\n    <h1 class=\"ui-hero__title\">{{title$|async}}</h1>\n    <p class=\"ui-hero__info\">{{description$|async}}</p>\n  </div>\n  <section class=\"ui-section\">\n    <div class=\"ui-card\" *ngFor=\"let package of packages$ | async\">\n      <div class=\"ui-card__header\">{{package.title}}</div>\n      <div class=\"ui-card__media\">\n        <img [src]=\"package.logo\" [alt]=\"package.name\" />\n      </div>\n      <div class=\"ui-card__description\">{{package.description}}</div>\n      <div class=\"ui-card__footer\">\n        <a class=\"btn btn-sm btn-link\" style=\"flex:1\" [routerLink]=\"['/packages', package.id]\">Read more</a>\n        <img\n          [alt]=\"package.namespace\"\n          [src]=\"package.badge + '?color=green&style=flat'\"\n        />\n      </div>\n    </div>\n  </section>\n\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { HomeComponent } from './home.component';\nimport { HomeRoutingModule } from './home-routing.module';\nimport { HomeService } from './home-service';\nimport { NgxsModule } from '@ngxs/store';\nimport { HomeState } from './state/home.state';\n\n@NgModule({\n  declarations: [HomeComponent],\n  providers: [HomeService],\n  imports: [\n    CommonModule,\n    HomeRoutingModule,\n    NgxsModule.forFeature([HomeState])\n  ]\n})\nexport class HomeModule {}\n","import { action, NgxsDataRepository, StateRepository } from '@ngxs-labs/data';\nimport { Injectable } from '@angular/core';\nimport { HomeModel } from './home-model';\nimport { State, Select } from '@ngxs/store';\nimport { HomeService } from '../home-service';\nimport { tap } from 'rxjs/operators';\nimport { Observable } from 'rxjs';\n\n@StateRepository()\n@State<HomeModel>({\n  name: 'home',\n  defaults: {\n    title: null,\n    description: null,\n    packages: null\n  }\n})\n@Injectable()\nexport class HomeState extends NgxsDataRepository<HomeModel> {\n  @Select(state => state.home)\n  public home$: Observable<HomeModel>;\n\n  constructor(\n    private readonly homeService: HomeService\n  ) {\n    super();\n  }\n\n  @action()\n  public getContent() {\n    return this.homeService.fetchAll().pipe(\n      tap(content => this.setState((state) => {\n        return {\n          ...state,\n          title: content.title,\n          description: content.description,\n          packages: content.packages\n        };\n      }))\n    );\n  }\n}\n"],"sourceRoot":"webpack:///"}